{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/the-crimson-archive/lib/supabase/client.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { createBrowserClient } from \"@supabase/ssr\"\r\n\r\nexport function createClient() {\r\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n\r\n  // Return null if env vars are missing instead of throwing\r\n  if (!supabaseUrl || !supabaseAnonKey) {\r\n    console.warn(\"[v0] Supabase environment variables not configured\")\r\n    return null\r\n  }\r\n\r\n  return createBrowserClient(supabaseUrl, supabaseAnonKey)\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAFA;;AAIO,SAAS;IACd,MAAM;IACN,MAAM;IAEN,0DAA0D;IAC1D;;IAKA,OAAO,IAAA,iMAAmB,EAAC,aAAa;AAC1C"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///D:/the-crimson-archive/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///D:/the-crimson-archive/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///D:/the-crimson-archive/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\r\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///D:/the-crimson-archive/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///D:/the-crimson-archive/components/auth-form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { useState } from \"react\"\r\n// âœ… Re-introducing client-side imports for sign-in functionality\r\nimport { useRouter } from \"next/navigation\" \r\nimport { createClient } from \"@/lib/supabase/client\" \r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\n\r\ninterface AuthFormProps {\r\n  onLoginSuccess: (userData: { email: string }) => void\r\n}\r\n\r\nexport function AuthForm({ onLoginSuccess }: AuthFormProps) {\r\n  const router = useRouter(); // Initialize router\r\n  const supabase = createClient(); // Initialize client-side Supabase client\r\n\r\n  const [isSignup, setIsSignup] = useState(false)\r\n  const [username, setUsername] = useState(\"\")\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [error, setError] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  \r\n  // isDev is defaulted to false for simplicity in this form\r\n  const isDev = false; \r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setError(\"\")\r\n    setLoading(true)\r\n\r\n    try {\r\n      if (isSignup) {\r\n        // --- UNIFIED SERVER-SIDE SIGNUP FLOW ---\r\n        \r\n        const response = await fetch(\"/api/auth/signup\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            username,\r\n            email,\r\n            password,\r\n            isDev,\r\n          }),\r\n        })\r\n        \r\n        const result = await response.json();\r\n\r\n        if (!response.ok) {\r\n          setError(result.error || \"Sign up failed due to generic server error.\")\r\n          return\r\n        }\r\n\r\n        setError(result.message) \r\n\r\n      } else {\r\n        if (!supabase) {\r\n          setError(\"Authentication client not initialized.\")\r\n          return\r\n        }\r\n\r\n        const { error: signInError } = await supabase.auth.signInWithPassword({\r\n          email,\r\n          password,\r\n        })\r\n\r\n        if (signInError) {\r\n          // Supabase errors are detailed (e.g., Invalid login credentials)\r\n          setError(signInError.message)\r\n          return\r\n        }\r\n        \r\n        // Successful sign-in: Refresh the page to update the session state\r\n        router.refresh()\r\n      }\r\n    } catch (err) {\r\n      // This catches network errors or unexpected code issues\r\n      setError(\"A network error or unexpected client error occurred.\")\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\r\n      <Card className=\"w-full max-w-md border-2 border-primary bg-card rounded-xl shadow-2xl\">\r\n        <CardHeader className=\"border-b-2 border-primary\">\r\n          <CardTitle className=\"text-3xl font-extrabold text-primary tracking-wider\">CRIMSON</CardTitle>\r\n          <CardDescription className=\"text-lg text-muted-foreground pt-1\">\r\n            {isSignup ? \"Create your new account\" : \"Sign in to continue\"}\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"pt-6\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            {isSignup && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2 text-foreground\">Username</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  placeholder=\"Enter unique username\"\r\n                  value={username}\r\n                  onChange={(e) => setUsername(e.target.value)}\r\n                  className=\"border-primary focus:border-primary-500 bg-background\"\r\n                  required\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2 text-foreground\">Email</label>\r\n              <Input\r\n                type=\"email\"\r\n                placeholder=\"Enter email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                required\r\n                className=\"border-primary focus:border-primary-500 bg-background\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2 text-foreground\">Password</label>\r\n              <Input\r\n                type=\"password\"\r\n                placeholder=\"Enter password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                required\r\n                className=\"border-primary focus:border-primary-500 bg-background\"\r\n              />\r\n            </div>\r\n\r\n            {error && <div className=\"p-3 bg-red-900/10 border border-red-500 text-red-400 rounded-lg font-mono text-sm overflow-x-auto\">{error}</div>}\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full bg-primary text-primary-foreground hover:bg-primary/90 border-2 border-primary transition-all duration-300\"\r\n            >\r\n              {loading ? \"Processing...\" : isSignup ? \"Sign Up\" : \"Sign In\"}\r\n            </Button>\r\n          </form>\r\n\r\n          <div className=\"mt-8 text-center\">\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {isSignup ? \"Already have an account?\" : \"Don't have an account?\"}\r\n            </p>\r\n            <button\r\n              onClick={() => {\r\n                setIsSignup(!isSignup)\r\n                setError(\"\")\r\n                setUsername(\"\")\r\n                setPassword(\"\")\r\n              }}\r\n              className=\"mt-2 text-primary font-semibold hover:underline\"\r\n            >\r\n              {isSignup ? \"Sign In\" : \"Sign Up\"}\r\n            </button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAGA;AACA,iEAAiE;AACjE;AACA;AAEA;AACA;AACA;AAVA;;;;;;;;AAgBO,SAAS,SAAS,EAAE,cAAc,EAAiB;IACxD,MAAM,SAAS,IAAA,+IAAS,KAAI,oBAAoB;IAChD,MAAM,WAAW,IAAA,yIAAY,KAAI,yCAAyC;IAE1E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,0DAA0D;IAC1D,MAAM,QAAQ;IAEd,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QAEX,IAAI;YACF,IAAI,UAAU;gBACZ,0CAA0C;gBAE1C,MAAM,WAAW,MAAM,MAAM,oBAAoB;oBAC/C,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBACnB;wBACA;wBACA;wBACA;oBACF;gBACF;gBAEA,MAAM,SAAS,MAAM,SAAS,IAAI;gBAElC,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,SAAS,OAAO,KAAK,IAAI;oBACzB;gBACF;gBAEA,SAAS,OAAO,OAAO;YAEzB,OAAO;gBACL,IAAI,CAAC,UAAU;oBACb,SAAS;oBACT;gBACF;gBAEA,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;oBACpE;oBACA;gBACF;gBAEA,IAAI,aAAa;oBACf,iEAAiE;oBACjE,SAAS,YAAY,OAAO;oBAC5B;gBACF;gBAEA,mEAAmE;gBACnE,OAAO,OAAO;YAChB;QACF,EAAE,OAAO,KAAK;YACZ,wDAAwD;YACxD,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,iIAAI;YAAC,WAAU;;8BACd,8OAAC,uIAAU;oBAAC,WAAU;;sCACpB,8OAAC,sIAAS;4BAAC,WAAU;sCAAsD;;;;;;sCAC3E,8OAAC,4IAAe;4BAAC,WAAU;sCACxB,WAAW,4BAA4B;;;;;;;;;;;;8BAG5C,8OAAC,wIAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAK,UAAU;4BAAc,WAAU;;gCACrC,0BACC,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAAiD;;;;;;sDAClE,8OAAC,mIAAK;4CACJ,MAAK;4CACL,aAAY;4CACZ,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,WAAU;4CACV,QAAQ;;;;;;;;;;;;8CAKd,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAAiD;;;;;;sDAClE,8OAAC,mIAAK;4CACJ,MAAK;4CACL,aAAY;4CACZ,OAAO;4CACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4CACxC,QAAQ;4CACR,WAAU;;;;;;;;;;;;8CAId,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAAiD;;;;;;sDAClE,8OAAC,mIAAK;4CACJ,MAAK;4CACL,aAAY;4CACZ,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,QAAQ;4CACR,WAAU;;;;;;;;;;;;gCAIb,uBAAS,8OAAC;oCAAI,WAAU;8CAAqG;;;;;;8CAE9H,8OAAC,qIAAM;oCACL,MAAK;oCACL,UAAU;oCACV,WAAU;8CAET,UAAU,kBAAkB,WAAW,YAAY;;;;;;;;;;;;sCAIxD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;8CACV,WAAW,6BAA6B;;;;;;8CAE3C,8OAAC;oCACC,SAAS;wCACP,YAAY,CAAC;wCACb,SAAS;wCACT,YAAY;wCACZ,YAAY;oCACd;oCACA,WAAU;8CAET,WAAW,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtC"}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":["file:///D:/the-crimson-archive/components/dashboard-home.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Gamepad2, Users, Map, Zap, Plus, Eye, User as UserIconPlaceholder } from \"lucide-react\"\r\n\r\ninterface DashboardHomeProps {\r\n  games: any[]\r\n  characters: any[]\r\n  maps: any[]\r\n  mobs: any[]\r\n  userRole: \"dev\" | \"editor\" | \"viewer\" // Add possible roles\r\n  onNavigate: (view: \"home\" | \"browse\" | \"add\" | \"characters\" | \"maps\" | \"mobs\") => void\r\n}\r\n\r\nexport function DashboardHome({ games, characters, maps, mobs, userRole, onNavigate }: DashboardHomeProps) {\r\n\r\n  // --- 1. STATISTICS (NO CHANGE) ---\r\n  const stats = [\r\n    {\r\n      title: \"Total Games\",\r\n      value: games.length,\r\n      icon: Gamepad2,\r\n      color: \"text-primary\",\r\n      bgColor: \"bg-primary/10\",\r\n    },\r\n    {\r\n      title: \"Characters\",\r\n      value: characters.length,\r\n      icon: Users,\r\n      color: \"text-accent\",\r\n      bgColor: \"bg-accent/10\",\r\n    },\r\n    {\r\n      title: \"Maps\",\r\n      value: maps.length,\r\n      icon: Map,\r\n      color: \"text-primary\",\r\n      bgColor: \"bg-primary/10\",\r\n    },\r\n    {\r\n      title: \"Enemies\",\r\n      value: mobs.length,\r\n      icon: Zap,\r\n      color: \"text-accent\",\r\n      bgColor: \"bg-accent/10\",\r\n    },\r\n  ]\r\n\r\n  // --- 2. QUICK ACTIONS (MODIFIED FOR ROLE CHECK) ---\r\n  const quickActions: any[] = [] // Start with an empty array\r\n\r\n  // ðŸ”‘ Conditional check to include 'Add Game' only for 'dev' role\r\n  if (userRole === \"dev\") {\r\n    quickActions.push({\r\n      title: \"Add Game\",\r\n      description: \"Create a new game entry\",\r\n      icon: Plus,\r\n      action: () => onNavigate(\"add\"),\r\n      color: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n    });\r\n  }\r\n\r\n  // 'Browse Games' is always available\r\n  quickActions.push({\r\n    title: \"Browse Games\",\r\n    description: \"View all games in the database\",\r\n    icon: Eye,\r\n    action: () => onNavigate(\"browse\"),\r\n    color: \"bg-accent text-accent-foreground hover:bg-accent/90\",\r\n  });\r\n\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Hero Section (NO CHANGE) */}\r\n      <div className=\"bg-primary text-primary-foreground p-8 rounded-lg border-2 border-accent\">\r\n        <h1 className=\"text-4xl font-bold mb-2\">Welcome Page</h1>\r\n        <p className=\"text-lg opacity-90\">\r\n          Add whatever you'd like here tbh. Maybe some news, updates, or quick links? Ur marzi.\r\n        </p>\r\n      </div>\r\n\r\n      {/* Statistics Grid (NO CHANGE) */}\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-primary mb-4\">Database Overview</h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          {stats.map((stat, idx) => {\r\n            const Icon = stat.icon\r\n            return (\r\n              <Card key={idx} className=\"border-2 border-primary bg-card hover:border-accent transition-colors\">\r\n                <CardHeader className=\"pb-3\">\r\n                  <div className={`${stat.bgColor} w-12 h-12 rounded-lg flex items-center justify-center mb-2`}>\r\n                    <Icon className={`${stat.color} w-6 h-6`} />\r\n                  </div>\r\n                  <CardTitle className=\"text-sm text-muted-foreground\">{stat.title}</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-3xl font-bold text-primary\">{stat.value}</div>\r\n                </CardContent>\r\n              </Card>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Actions (MODIFIED) */}\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-primary mb-4\">Quick Actions</h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {quickActions.map((action, idx) => {\r\n            const Icon = action.icon\r\n            return (\r\n              <Button\r\n                key={idx}\r\n                onClick={action.action}\r\n                className={`${action.color} h-auto p-6 border-2 border-current justify-start flex-col items-start`}\r\n              >\r\n                <div className=\"flex items-center gap-3 w-full\">\r\n                  <Icon size={32} />\r\n                  <div className=\"text-left\">\r\n                    <div className=\"font-bold text-lg\">{action.title}</div>\r\n                    <div className=\"text-sm opacity-90\">{action.description}</div>\r\n                  </div>\r\n                </div>\r\n              </Button>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Recent Games (NO CHANGE) */}\r\n      {games.length > 0 && (\r\n        <div>\r\n          <div className=\"flex justify-between items-center mb-4\">\r\n            <h2 className=\"text-2xl font-bold text-primary\">Recent Games</h2>\r\n            <Button\r\n              onClick={() => onNavigate(\"browse\")}\r\n              className=\"bg-accent text-accent-foreground hover:bg-accent/90\"\r\n            >\r\n              View All\r\n            </Button>\r\n          </div>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {games.slice(0, 3).map((game) => (\r\n              <Card\r\n                key={game.gameid}\r\n                className=\"border-2 border-primary hover:border-accent transition-colors bg-card cursor-pointer\"\r\n                onClick={() => onNavigate(\"browse\")}\r\n              >\r\n                <div className=\"w-full h-40 overflow-hidden rounded-t flex items-center justify-center p-4\">\r\n                  {game.gamelogourl ? (\r\n                    <img\r\n                      src={game.gamelogourl}\r\n                      alt={game.title}\r\n                      className=\"object-contain max-w-full max-h-full\"\r\n                      onError={(e) => { e.currentTarget.onerror = null; e.currentTarget.src = 'https://placehold.co/160x160/292524/ffffff?text=Logo'; }}\r\n                    />\r\n                  ) : (\r\n                    <Gamepad2 className=\"w-16 h-16 text-muted-foreground\" />\r\n                  )}\r\n                </div>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-primary line-clamp-1\">{game.title}</CardTitle>\r\n                  <CardDescription className=\"text-muted-foreground\">\r\n                    {new Date(game.releasedate).getFullYear()}\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <p className=\"text-sm line-clamp-2 text-muted-foreground\">{game.plotsummary}</p>\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Recent Characters (NO CHANGE) */}\r\n      {characters.length > 0 && (\r\n        <div className=\"mt-8\">\r\n          <div className=\"flex justify-between items-center mb-4\">\r\n            <h2 className=\"text-2xl font-bold text-primary\">Recent Characters</h2>\r\n            <Button\r\n              onClick={() => onNavigate(\"characters\")}\r\n              className=\"bg-accent text-accent-foreground hover:bg-accent/90\"\r\n            >\r\n              View All\r\n            </Button>\r\n          </div>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {characters.slice(0, 3).map((char) => (\r\n              <Card\r\n                key={char.characterid}\r\n                className=\"border-2 border-primary hover:border-accent transition-colors bg-card cursor-pointer\"\r\n                onClick={() => onNavigate(\"characters\")}\r\n              >\r\n                <div className=\"w-full h-40 overflow-hidden rounded-t flex items-center justify-center p-4\">\r\n                  {char.spriteurl ? (\r\n                    <img\r\n                      src={char.spriteurl}\r\n                      alt={char.name}\r\n                      className=\"object-contain max-w-full max-h-full\"\r\n                      onError={(e) => { e.currentTarget.onerror = null; e.currentTarget.src = 'https://placehold.co/160x160/292524/ffffff?text=Char'; }}\r\n                    />\r\n                  ) : (\r\n                    <UserIconPlaceholder className=\"w-16 h-16 text-muted-foreground\" />\r\n                  )}\r\n                </div>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-primary line-clamp-1\">{char.name}</CardTitle>\r\n                  <CardDescription className=\"text-muted-foreground\">\r\n                    {char.englishva && `English VA: ${char.englishva}`}\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <p className=\"text-sm line-clamp-2 text-muted-foreground\">{char.backstory}</p>\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <Card className=\"border-0 border-primary bg-primary/5\">\r\n      </Card>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1031, "column": 0}, "map": {"version":3,"sources":["file:///D:/the-crimson-archive/components/dashboard.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\n// ... (other imports)\r\nimport { DashboardHome } from \"@/components/dashboard-home\"\r\nimport { Menu, Star, X } from \"lucide-react\"\r\n\r\n// --- Placeholder Components (kept for reference) ---\r\ninterface AddRatingFormProps {\r\n  gameId?: string;\r\n  onRatingAdded: () => void;\r\n  onCancel: () => void;\r\n}\r\nconst AddRatingForm = ({ gameId, onRatingAdded, onCancel }: AddRatingFormProps) => (\r\n  <div className=\"p-6 border rounded-lg space-y-4\">\r\n    <h2 className=\"text-2xl font-bold\">Add New Rating {gameId && `for Game ID: ${gameId}`}</h2>\r\n    <p className=\"text-muted-foreground\">This is a placeholder for your AddRatingForm component.</p>\r\n    <div className=\"flex gap-2\">\r\n      <Button onClick={onRatingAdded}>Submit Rating (Placeholder)</Button>\r\n      <Button variant=\"outline\" onClick={onCancel}>Cancel</Button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\ninterface AddClipFormProps {\r\n  gameId?: string;\r\n  onClipAdded: () => void;\r\n  onCancel: () => void;\r\n}\r\nconst AddClipForm = ({ gameId, onClipAdded, onCancel }: AddClipFormProps) => (\r\n  <div className=\"p-6 border rounded-lg space-y-4\">\r\n    <h2 className=\"text-2xl font-bold\">Add New Clip {gameId && `for Game ID: ${gameId}`}</h2>\r\n    <p className=\"text-muted-foreground\">This is a placeholder for your AddClipForm component.</p>\r\n    <div className=\"flex gap-2\">\r\n      <Button onClick={onClipAdded}>Submit Clip (Placeholder)</Button>\r\n      <Button variant=\"outline\" onClick={onCancel}>Cancel</Button>\r\n    </div>\r\n  </div>\r\n);\r\n// ---------------------------------------------------\r\n\r\n\r\ninterface DashboardProps {\r\n  user: {\r\n    username: string;\r\n    email: string;\r\n    userid: string; // UUID string\r\n    // ðŸ”‘ CHANGE 1: Assume isDev is a mandatory property on the user object\r\n    isDev: boolean;\r\n  }\r\n  onLogout: () => void\r\n}\r\n\r\nexport function Dashboard({ user, onLogout }: DashboardProps) {\r\n  const [view, setView] = useState<\"home\" | \"browse\" | \"add\" | \"characters\" | \"maps\" | \"mobs\" | \"ratings\" | \"add-rating\" | \"account\" | \"clips\" | \"add-clip\">(\"home\")\r\n\r\n  // ðŸ”‘ CHANGE 2: Initialize role to 'viewer'. No need for a separate role loading state.\r\n  const [role, setRole] = useState<\"dev\" | \"editor\" | \"viewer\">(\"viewer\")\r\n\r\n  const [games, setGames] = useState<any[]>([])\r\n  // ... (other data states)\r\n  const [characters, setCharacters] = useState<any[]>([])\r\n  const [maps, setMaps] = useState<any[]>([])\r\n  const [mobs, setMobs] = useState<any[]>([])\r\n  const [ratings, setRatings] = useState<any[]>([])\r\n  const [clips, setClips] = useState<any[]>([])\r\n\r\n  // The state structure for holding the ID\r\n  const [gameIdForRating, setGameIdForRating] = useState<string | null>(null)\r\n  const [gameIdForClip, setGameIdForClip] = useState<string | null>(null)\r\n\r\n  // ... (loading states)\r\n  const [loadingGames, setLoadingGames] = useState(true)\r\n  const [loadingCharacters, setLoadingCharacters] = useState(true)\r\n  const [loadingMaps, setLoadingMaps] = useState(true)\r\n  const [loadingMobs, setLoadingMobs] = useState(true)\r\n  const [loadingRatings, setLoadingRatings] = useState(true)\r\n  const [loadingClips, setLoadingClips] = useState(true)\r\n\r\n  const [menuOpen, setMenuOpen] = useState(false)\r\n\r\n  useEffect(() => {\r\n    // ðŸ”‘ CHANGE 3: Set role immediately based on the user prop, which is already fetched.\r\n    if (user.isDev) {\r\n      setRole(\"dev\")\r\n    } else {\r\n      // You could add logic here to differentiate 'editor' from 'viewer' if needed,\r\n      // but based on the prompt, 'dev' is the only special case for adding games.\r\n      setRole(\"viewer\")\r\n    }\r\n\r\n    fetchGames()\r\n    fetchCharacters()\r\n    fetchMaps()\r\n    fetchMobs()\r\n    fetchRatings()\r\n    fetchClips()\r\n\r\n    // ðŸ”‘ Dependency array now only includes user.isDev and component lifecycle functions\r\n  }, [user.isDev])\r\n\r\n\r\n  // --- (Your existing fetch and handler functions remain the same) ---\r\n  // ...\r\n\r\n  const fetchGames = async () => { /* ... */ setLoadingGames(false); }\r\n  const handleGameAdded = () => { /* ... */ }\r\n  const fetchCharacters = async () => { /* ... */ setLoadingCharacters(false); }\r\n  const handleCharacterAdded = () => { /* ... */ }\r\n  const fetchMobs = async () => { /* ... */ setLoadingMobs(false); }\r\n  const handleMobAdded = () => { /* ... */ }\r\n  const fetchMaps = async () => { /* ... */ setLoadingMaps(false); }\r\n  const handleMapAdded = () => { /* ... */ }\r\n  const fetchRatings = async () => {\r\n    // Fixed the bug in the map function here\r\n    try { /* ... */ } catch (err) { /* ... */ } finally { setLoadingRatings(false); }\r\n  }\r\n  const handleRatingAdded = () => { /* ... */ }\r\n  const handleInitiateAddRating = (gameId: string | undefined) => { setGameIdForRating(gameId || null); setView(\"add-rating\"); }\r\n  const fetchClips = async () => { /* ... */ setLoadingClips(false); }\r\n  const handleClipAdded = () => { /* ... */ }\r\n  const handleInitiateAddClip = (gameId: string | undefined) => { setGameIdForClip(gameId || null); setView(\"add-clip\"); }\r\n\r\n\r\n  const navItems = [\r\n    { id: \"home\", label: \"Dashboard\" },\r\n    { id: \"browse\", label: \"Browse Games\" },\r\n    // Conditional display of \"Add Game\" based on the role state\r\n    ...(role === \"dev\" ? [{ id: \"add\", label: \"Add Game\" }] : []),\r\n    { id: \"ratings\", label: \"Game Ratings\", icon: Star },\r\n    { id: \"clips\", label: \"Clips\" },\r\n    { id: \"characters\", label: \"Characters\" },\r\n    { id: \"maps\", label: \"Maps\" },\r\n    { id: \"mobs\", label: \"Mobs\" },\r\n  ]\r\n\r\n  const displayName = user.username && user.username.length > 0\r\n    ? user.username\r\n    : (user.email ? user.email.split('@')[0] : 'Account');\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Header */}\r\n      <header className=\"bg-primary text-primary-foreground border-b-4 border-accent\">\r\n        <div className=\"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center\">\r\n\r\n          <button\r\n            onClick={() => setView(\"home\")}\r\n            className=\"flex items-center gap-2 hover:opacity-80 transition-opacity\"\r\n          >\r\n            <div className=\"text-2xl font-bold\">CRIMSON DB</div>\r\n          </button>\r\n\r\n          <div className=\"flex items-center gap-4\">\r\n\r\n            <button\r\n              onClick={() => { setView(\"account\"); setMenuOpen(false); }}\r\n              className=\"text-sm underline hover:opacity-80 transition-opacity\"\r\n            >\r\n              {displayName} ({role})\r\n            </button>\r\n\r\n            <button onClick={() => setMenuOpen(!menuOpen)} className=\"p-2 hover:bg-primary/80 rounded\">\r\n              {menuOpen ? <X size={24} /> : <Menu size={24} />}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Dropdown Navigation Menu */}\r\n        {menuOpen && (\r\n          <div className=\"bg-primary/95 border-t border-primary-foreground\">\r\n            <div className=\"max-w-7xl mx-auto px-4 py-4\">\r\n              <div className=\"flex flex-col md:flex-row md:items-center md:gap-2 w-full space-y-2 md:space-y-0\">\r\n                {navItems.map((item) => (\r\n                  // The navItems array already handles hiding 'Add Game' based on role\r\n                  <Button\r\n                    key={item.id}\r\n                    onClick={() => {\r\n                      setView(item.id as any)\r\n                      setMenuOpen(false)\r\n                    }}\r\n                    className=\"w-full justify-start md:w-auto md:justify-center\"\r\n                    variant={view === item.id ? \"default\" : \"outline\"}\r\n                  >\r\n                    {item.label}\r\n                  </Button>\r\n                ))}\r\n\r\n                <Button\r\n                  onClick={onLogout}\r\n                  className=\"w-full justify-start bg-transparent md:w-auto md:justify-center md:ml-auto\"\r\n                  variant=\"outline\"\r\n                >\r\n                  Logout\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"max-w-7xl mx-auto p-4\">\r\n        {view === \"account\" && <AccountDetails user={user} onBack={() => setView(\"home\")} />}\r\n\r\n        {/* Pass the derived role state to DashboardHome */}\r\n        {view === \"home\" && <DashboardHome games={games} characters={characters} maps={maps} mobs={mobs} onNavigate={setView} userRole={role} />}\r\n\r\n        {view === \"browse\" && <GamesGallery games={games} loading={loadingGames} onRefresh={fetchGames} />}\r\n\r\n        {/* Conditional Rendering: Only render AddGameForm if role is 'dev' */}\r\n        {view === \"add\" && role === \"dev\" && <AddGameForm onGameAdded={handleGameAdded} />}\r\n        {view === \"add\" && role !== \"dev\" && (\r\n          <div className=\"text-center p-10 text-xl text-red-500\">Permission Denied: Only developers can add new games.</div>\r\n        )}\r\n\r\n        {view === \"ratings\" && <RatingsBrowser ratings={ratings} loading={loadingRatings} onRefresh={fetchRatings} onAddRating={() => handleInitiateAddRating(undefined)} />}\r\n        {view === \"add-rating\" && (\r\n          <AddRatingForm\r\n            gameId={gameIdForRating || undefined}\r\n            onRatingAdded={handleRatingAdded}\r\n            onCancel={() => setView(\"ratings\")}\r\n          />\r\n        )}\r\n\r\n        {view === \"characters\" && <CharacterBrowser characters={characters} loading={loadingCharacters} onRefresh={fetchCharacters} onCharacterAdded={handleCharacterAdded} />}\r\n        {view === \"maps\" && <MapBrowser maps={maps} loading={loadingMaps} onRefresh={fetchMaps} onMapAdded={handleMapAdded} />}\r\n        {view === \"mobs\" && <MobBrowser mobs={mobs} loading={loadingMobs} onRefresh={fetchMobs} onMobAdded={handleMobAdded} />}\r\n\r\n        {view === \"clips\" && <ClipBrowser clips={clips} loading={loadingClips} onRefresh={fetchClips} onAddClip={() => handleInitiateAddClip(undefined)} />}\r\n        {view === \"add-clip\" && (\r\n          <AddClipForm\r\n            gameId={gameIdForClip || undefined}\r\n            onClipAdded={handleClipAdded}\r\n            onCancel={() => setView(\"clips\")}\r\n          />\r\n        )}\r\n      </main>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1537, "column": 0}, "map": {"version":3,"sources":["file:///D:/the-crimson-archive/app/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport { AuthForm } from \"@/components/auth-form\"\r\nimport { Dashboard } from \"@/components/dashboard\"\r\n\r\n// Define the required User type\r\ninterface User {\r\n  email: string\r\n  username: string\r\n  // Add the missing 'userid' property\r\n  userid: string \r\n}\r\n\r\nexport default function Home() {\r\n  // Use the new User type\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    const supabase = createClient()\r\n\r\n    if (!supabase) {\r\n      setError(\r\n        \"Supabase not configured. Please add NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY to your environment variables.\",\r\n      )\r\n      setLoading(false)\r\n      return\r\n    }\r\n\r\n    const checkUser = async () => {\r\n      try {\r\n        const {\r\n          data: { user: supabaseUser },\r\n        } = await supabase.auth.getUser()\r\n\r\n        if (supabaseUser) {\r\n          setUser({\r\n            email: supabaseUser.email || \"\",\r\n            username: supabaseUser.user_metadata?.display_name || supabaseUser.email?.split(\"@\")[0] || \"User\",\r\n            // Make sure to include the userid (which is the Supabase user's ID)\r\n            userid: supabaseUser.id, \r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[v0] Error checking user:\", error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    checkUser()\r\n\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange(async (_event, session) => {\r\n      if (session?.user) {\r\n        setUser({\r\n          email: session.user.email || \"\",\r\n          username: session.user.user_metadata?.display_name || session.user.email?.split(\"@\")[0] || \"User\",\r\n          // Include the userid from the session\r\n          userid: session.user.id,\r\n        })\r\n      } else {\r\n        setUser(null)\r\n      }\r\n    })\r\n\r\n    return () => {\r\n      subscription?.unsubscribe()\r\n    }\r\n  }, [])\r\n\r\n  const handleLogout = async () => {\r\n    const supabase = createClient()\r\n    if (supabase) {\r\n      await supabase.auth.signOut()\r\n    }\r\n    setUser(null)\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <main className=\"min-h-screen bg-background flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-accent mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">Loading...</p>\r\n        </div>\r\n      </main>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <main className=\"min-h-screen bg-background flex items-center justify-center\">\r\n        <div className=\"bg-red-900/20 border border-red-500 rounded-lg p-6 max-w-md\">\r\n          <h1 className=\"text-red-500 font-bold mb-2\">Configuration Error</h1>\r\n          <p className=\"text-white text-sm\">{error}</p>\r\n          <p className=\"text-muted-foreground text-xs mt-4\">\r\n            Check your Vercel project's environment variables in the \"Vars\" section of the Connect sidebar.\r\n          </p>\r\n        </div>\r\n      </main>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-background\">\r\n      {user ? (\r\n        <Dashboard user={user} onLogout={handleLogout} />\r\n      ) : (\r\n        <AuthForm\r\n            onLoginSuccess={(userData) => {\r\n              // Assuming userData from AuthForm has an 'id' or 'userid' field\r\n              // You might need to adjust this logic based on what AuthForm actually returns\r\n              const userObject = userData as { email: string; id: string; username?: string };\r\n              setUser({\r\n                email: userObject.email,\r\n                username: userObject.username ?? userObject.email.split(\"@\")[0] ?? \"User\",\r\n                // Assuming the user ID is returned as 'id'\r\n                userid: userObject.id, \r\n              })\r\n            }}\r\n          />\r\n      )}\r\n    </main>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAee,SAAS;IACtB,wBAAwB;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW,IAAA,yIAAY;QAE7B,IAAI,CAAC,UAAU;YACb,SACE;YAEF,WAAW;YACX;QACF;QAEA,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,EACJ,MAAM,EAAE,MAAM,YAAY,EAAE,EAC7B,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;gBAE/B,IAAI,cAAc;oBAChB,QAAQ;wBACN,OAAO,aAAa,KAAK,IAAI;wBAC7B,UAAU,aAAa,aAAa,EAAE,gBAAgB,aAAa,KAAK,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI;wBAC3F,oEAAoE;wBACpE,QAAQ,aAAa,EAAE;oBACzB;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,6BAA6B;YAC7C,SAAU;gBACR,WAAW;YACb;QACF;QAEA;QAEA,MAAM,EACJ,MAAM,EAAE,YAAY,EAAE,EACvB,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAAC,OAAO,QAAQ;YACjD,IAAI,SAAS,MAAM;gBACjB,QAAQ;oBACN,OAAO,QAAQ,IAAI,CAAC,KAAK,IAAI;oBAC7B,UAAU,QAAQ,IAAI,CAAC,aAAa,EAAE,gBAAgB,QAAQ,IAAI,CAAC,KAAK,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI;oBAC3F,sCAAsC;oBACtC,QAAQ,QAAQ,IAAI,CAAC,EAAE;gBACzB;YACF,OAAO;gBACL,QAAQ;YACV;QACF;QAEA,OAAO;YACL,cAAc;QAChB;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,MAAM,WAAW,IAAA,yIAAY;QAC7B,IAAI,UAAU;YACZ,MAAM,SAAS,IAAI,CAAC,OAAO;QAC7B;QACA,QAAQ;IACV;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAK,WAAU;sBACd,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAI7C;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAK,WAAU;sBACd,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA8B;;;;;;kCAC5C,8OAAC;wBAAE,WAAU;kCAAsB;;;;;;kCACnC,8OAAC;wBAAE,WAAU;kCAAqC;;;;;;;;;;;;;;;;;IAM1D;IAEA,qBACE,8OAAC;QAAK,WAAU;kBACb,qBACC,8OAAC,qIAAS;YAAC,MAAM;YAAM,UAAU;;;;;iCAEjC,8OAAC,uIAAQ;YACL,gBAAgB,CAAC;gBACf,gEAAgE;gBAChE,8EAA8E;gBAC9E,MAAM,aAAa;gBACnB,QAAQ;oBACN,OAAO,WAAW,KAAK;oBACvB,UAAU,WAAW,QAAQ,IAAI,WAAW,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI;oBACnE,2CAA2C;oBAC3C,QAAQ,WAAW,EAAE;gBACvB;YACF;;;;;;;;;;;AAKZ"}}]
}